# This config was automatically generated from your source code
# Stacks detected: deps:python:.,file:setup.py:.
version: 2.1
orbs:
  python: circleci/python@2
  node: circleci/node@5.2.0
  aws-cli: circleci/aws-cli@4.0
  aws-ecr: circleci/aws-ecr@7.3.0
  browser-tools: circleci/browser-tools@1.4.6
jobs:
  back_end:
    docker:
      - image: cimg/python:3.8-node
    working_directory: ~/repo
    executor: aws-ecr/default
    steps:
      - checkout
      - run:
          name: Install DbModel
          command: |
            pip install -r newsrecomendation/DbModel/requirements.txt 
            pip install newsrecomendation/DbModel
      - run:
          name: Install api dependencies
          command:  | 
            pip install -r newsrecomendation/Api/requirements.txt 
            pip install -r newsrecomendation/DbModel
      - run:
          name: Install Analyzer dependencies
          command:  pip install -r newsrecomendation/DataAnalyzer/requirements.txt
      - run:
          name: Install Collector dependencies
          command: pip install -r newsrecomendation/DataCollector/requirements.txt
      - run:
          name: Run tests
          command: python -m unittest discover -s test

#  deploy:
#    executor:
#      name: aws-ecr/default
#      image: ubuntu-2004:202111-02
#    docker:
#      - image: cimg/base:stable
#    steps:

workflows:
  build-and-test:
    jobs:
      - back_end
#      - build-package:
#          requires:
#            - test-python
#     - deploy:
#         requires:
#           - build-package
